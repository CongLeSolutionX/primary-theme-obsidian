/*──────────Internal & External Links──────────*/
/* Source View Resolved Links */

.cm-s-obsidian span.cm {
    &-url,
    &-link,
    &-link span.cm-underline,
    &-hmd-internal-link,
    &-hmd-internal-link span.cm-underline,
    &-hmd-footnote.cm-link,
    &-header.cm-hmd-internal-link { 
        color: var(--md-color-reslink);
        text-decoration: none;
        border-bottom: 1px solid var(--md-color-reslink);

        transition: var(--duration-superfast)
                    var(--motion-smooth);

        &:hover {
            color: var(--md-color-reslink-hover);
            text-decoration: none;
            border-bottom: 1px solid var(--md-color-reslink-hover);
            cursor: pointer;
        }

        &:active {
            color: var(--md-color-reslink-active);
            text-decoration: none;
            border-bottom: 1px solid var(--md-color-reslink-active);
        }
    }

    &-blockid {
        color: var(--md-color-reslink);
        text-decoration: none;

        transition: var(--duration-superfast)
                    var(--motion-smooth);

        &:hover {
            color: var(--md-color-reslink-hover);
            text-decoration: none;
            cursor: pointer;
        }

        &:active {
            color: var(--md-color-reslink-active);
            text-decoration: none;
        }
    }
}

/* Source View Unresolved Links */
.cm-s-obsidian span.is-unresolved span.cm {
    &-link span.cm-underline,
    &-hmd-internal-link,
    &-hmd-internal-link span.cm-underline,
    &-header.cm-hmd-internal-link {
        color: var(--md-color-unreslink);
        text-decoration: none;
        border-bottom: 1px solid var(--md-color-unreslink);

        transition: var(--duration-superfast)
                    var(--motion-smooth);

        &:hover {
            color: var(--md-color-unreslink-hover);
            text-decoration: none;
            border-bottom: 1px solid var(--md-color-unreslink-hover);
            cursor: pointer;
        }

        &:active {
            color: var(--md-color-unreslink-active);
            text-decoration: none;
            border-bottom: 1px solid var(--md-color-unreslink-active);
        }
    }
}

/* Preview Resolved Links */
a:not(a.footnote-link, a.tag) {
    .view-content & {
        word-break: break-all;
        color: var(--md-color-reslink);
        text-decoration: none;
        border-bottom: 1px solid var(--md-color-reslink);
        
        transition: var(--duration-superfast)
        var(--motion-smooth);
        
        &:hover {
            color: var(--md-color-reslink-hover);
            text-decoration: none;
            border-bottom: 1px solid var(--md-color-reslink-hover);
            cursor: pointer;
        }
        
        &:active {
            color: var(--md-color-reslink-active);
            text-decoration: none;
            border-bottom: 1px solid var(--md-color-reslink-active);
        }
    }

    .markdown-preview-view & {
        &.internal-link,
        &.external-link {
            word-break: break-all;
            color: var(--md-color-reslink);
            text-decoration: none;
            border-bottom: 1px solid var(--md-color-reslink);
            
            transition: var(--duration-superfast)
            var(--motion-smooth);
            
            &:hover {
                color: var(--md-color-reslink-hover);
                text-decoration: none;
                border-bottom: 1px solid var(--md-color-reslink-hover);
                cursor: pointer;
            }
            
            &:active {
                color: var(--md-color-reslink-active);
                text-decoration: none;
                border-bottom: 1px solid var(--md-color-reslink-active);
            }

            &.is-unresolved {
                color: var(--md-color-unreslink);
                text-decoration: none;
                border-bottom: 1px solid var(--md-color-unreslink);
        
                transition: var(--duration-superfast)
                            var(--motion-smooth);
        
                &:hover {
                    color: var(--md-color-unreslink-hover);
                    text-decoration: none;
                    border-bottom: 1px solid var(--md-color-unreslink-hover);
                    cursor: pointer;
                }
        
                &:active {
                    color: var(--md-color-unreslink-active);
                    text-decoration: none;
                    border-bottom: 1px solid var(--md-color-unreslink-active);
                }
            }
        }
    }
}

a {
    .markdown-preview-view & {
        &.footnote-link {
            color: var(--md-color-reslink);
            text-decoration: none;
        }
    }
}

/* Opacity of Unresolved Links Fix */
.markdown-source-view.mod-cm6 .is-unresolved,
.markdown-preview-view .internal-link.is-unresolved {
    opacity: 1;
}

/* External Link Icon Position Fix */
.external-link {
    background-position-y: initial;
}
